# 事件循环

## 同步和异步

- 同步：执行某个任务时，没得到结果之前，不会继续后续的操作
- 异步：一个异步任务执行后，没有得到结果之前，就可以继续执行后续操作。异步任务完成后，一般通过回调通知调用者。比如：setTimeout、fetch/XMLHttpRequest

### 回调函数

- 缺点：
  - 回调地狱
  - 高度耦合
  - 不易维护
  - 不能直接 return

### 事件驱动

异步任务的执行，取决于事件的驱动

```js
document.addEventListener('click'. function() {})
```

- 优点：
  - 去耦合
  - 便于实现模块化
- 缺点：
  - 运行流程不清晰
  - 阅读代码困难

### 发布订阅

- 也是使用事件驱动，但是有一个事件信息中心，可以查看消息流转

### Promise

- 拉平回调函数，把回调嵌套变为链式调用
- 优点：
  - 链式调用，流程清晰
- 缺点：
  - 代码冗余，不够简洁
  - 无法取消 Promise
  - 错误需要通过回调函数捕获

### Generate

- 最大特点就是可以控制函数执行
- 优点：
  - 可以控制函数执行
- 缺点：
  - 执行时机太过麻烦

### async/await

- async 函数就是 Generate 函数的语法糖
- 优点：
  - 内置执行器
  - 语义更好
- 缺点：
  - 函数声明 async 蝴蝶效应

## 理解现代异步编程的核心 Promise

- Promise 三种状态
  - pendding
  - fulfilled
  - rejected

## async 函数的本质

- Generator 函数
  - 首先其实是一个普通函数
